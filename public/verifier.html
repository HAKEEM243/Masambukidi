<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" href="/static/logo-elucco.png">
  <link rel="shortcut icon" type="image/png" href="/static/logo-elucco.png">
  <title>Vérification de Contenu — E.LU.C.CO.</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/axios@1.6.0/dist/axios.min.js"></script>
  <style>
    :root{--gold:#C9A227;--bg:#050508;--bg-card:#0D0D18;--border:#1C1C2E;--text:#EEEAE4;--text-muted:#8A8799;--text-dim:#5A5870;}
    *,*::before,*::after{margin:0;padding:0;box-sizing:border-box;}
    body{font-family:'Inter',sans-serif;background:var(--bg);color:var(--text);min-height:100vh;}
    nav{background:rgba(5,5,8,.96);backdrop-filter:blur(20px);border-bottom:1px solid rgba(201,162,39,.15);padding:0 40px;display:flex;align-items:center;justify-content:space-between;height:68px;position:sticky;top:0;z-index:100;}
    .nav-brand{display:flex;align-items:center;gap:12px;text-decoration:none;}
    .nav-brand img{height:44px;object-fit:contain;}
    .nav-brand-name{font-family:'Playfair Display',serif;font-size:15px;font-weight:700;color:var(--gold);}
    .nav-links{display:flex;gap:6px;list-style:none;}
    .nav-links a{color:var(--text-muted);text-decoration:none;font-size:13px;padding:7px 14px;border-radius:6px;transition:all .2s;}
    .nav-links a:hover,.nav-links .al{color:var(--gold);}
    .nav-links .al{background:rgba(201,162,39,.1);font-weight:600;}
    .hero{background:linear-gradient(135deg,#050508,#0A0A18);border-bottom:1px solid var(--border);padding:60px 40px;text-align:center;}
    .tag{display:inline-block;background:rgba(31,58,122,.15);border:1px solid rgba(31,58,122,.3);color:#5B9BFF;font-size:11px;font-weight:700;letter-spacing:2px;text-transform:uppercase;padding:5px 14px;border-radius:20px;margin-bottom:20px;}
    h1{font-family:'Playfair Display',serif;font-size:clamp(28px,4vw,44px);font-weight:700;color:#fff;margin-bottom:12px;}
    .desc{font-size:15px;color:var(--text-muted);max-width:540px;margin:0 auto;line-height:1.7;}
    .container{max-width:820px;margin:0 auto;padding:60px 40px;}
    .card{background:var(--bg-card);border:1px solid var(--border);border-radius:16px;padding:36px;margin-bottom:24px;}
    .label{display:block;font-size:12px;font-weight:600;color:var(--text-muted);text-transform:uppercase;letter-spacing:.5px;margin-bottom:8px;}
    .field-input{width:100%;background:rgba(255,255,255,.04);border:1px solid var(--border);color:var(--text);padding:13px 16px;border-radius:10px;font-size:14px;font-family:'Inter',sans-serif;transition:border-color .2s;}
    .field-input:focus{outline:none;border-color:rgba(201,162,39,.5);}
    .field-input::placeholder{color:var(--text-dim);}
    .btn{background:var(--gold);color:#050508;border:none;padding:14px 32px;font-size:14px;font-weight:700;border-radius:10px;cursor:pointer;transition:all .2s;font-family:'Inter',sans-serif;display:inline-flex;align-items:center;gap:8px;}
    .btn:hover{background:#E8C84A;transform:translateY(-1px);}
    .btn-outline{background:transparent;border:1px solid var(--border);color:var(--text-muted);padding:13px 24px;font-size:14px;border-radius:10px;cursor:pointer;transition:all .2s;font-family:'Inter',sans-serif;display:inline-flex;align-items:center;gap:8px;}
    .btn-outline:hover{border-color:rgba(201,162,39,.4);color:var(--gold);}
    .result{border-radius:12px;padding:24px 28px;margin-top:20px;display:none;}
    .r-ok{background:rgba(26,92,26,.12);border:1px solid rgba(26,92,26,.3);}
    .r-err{background:rgba(122,31,31,.12);border:1px solid rgba(122,31,31,.3);}
    .cert-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px;}
    .cert-item{background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:8px;padding:12px 16px;}
    .cert-key{font-size:11px;color:var(--text-dim);text-transform:uppercase;letter-spacing:.5px;margin-bottom:4px;}
    .cert-val{font-size:13px;color:var(--text);font-weight:500;}
    .tabs{display:flex;gap:4px;background:rgba(255,255,255,.03);border:1px solid var(--border);border-radius:10px;padding:4px;margin-bottom:28px;}
    .tab{flex:1;padding:10px;text-align:center;font-size:13px;font-weight:500;color:var(--text-muted);cursor:pointer;border-radius:7px;transition:all .2s;}
    .tab.active{background:var(--bg-card);color:var(--text);border:1px solid var(--border);}
    footer{background:var(--bg-card);border-top:1px solid var(--border);padding:32px 40px;text-align:center;}
    footer p{font-size:12px;color:var(--text-dim);}
    footer a{color:var(--gold);text-decoration:none;}
    @media(max-width:768px){nav{padding:0 20px;}.nav-links{display:none;}.container{padding:40px 20px;}.cert-grid{grid-template-columns:1fr;}}
  </style>
</head>
<body>
<nav>
  <a href="/" class="nav-brand"><img src="/static/logo-elucco.png" alt="Logo"><span class="nav-brand-name">E.LU.C.CO.</span></a>
  <ul class="nav-links">
    <li><a href="/">Accueil</a></li><li><a href="/qui-sommes-nous">À Propos</a></li>
    <li><a href="/verifier" class="al">Vérification</a></li>
    <li><a href="/signaler">Signaler</a></li>
  </ul>
</nav>
<div class="hero">
  <div class="tag">Système de Vérification</div>
  <h1>Vérification Officielle</h1>
  <p class="desc">Vérifiez si un contenu est officiellement autorisé, ou suivez l'état d'un signalement par son numéro de référence.</p>
</div>
<div class="container">
  <div class="card">
    <div class="tabs">
      <div class="tab active" onclick="switchTab('url',this)">Vérifier une URL</div>
      <div class="tab" onclick="switchTab('ref',this)">Suivi d'un signalement</div>
    </div>

    <div id="tab-url">
      <label class="label">URL du contenu à vérifier</label>
      <div style="display:flex;gap:12px;margin-bottom:8px;">
        <input type="url" id="verifyUrl" class="field-input" placeholder="https://www.facebook.com/...">
        <button class="btn" onclick="verifyUrl()" style="white-space:nowrap;"><i class="fas fa-search"></i> Vérifier</button>
      </div>
      <p style="font-size:12px;color:var(--text-dim);">Entrez l'URL exacte du contenu (post Facebook, vidéo YouTube, etc.)</p>
      <div id="urlResult" class="result"></div>
    </div>

    <div id="tab-ref" style="display:none;">
      <label class="label">Numéro de référence</label>
      <div style="display:flex;gap:12px;margin-bottom:8px;">
        <input type="text" id="refInput" class="field-input" placeholder="SIG-20260220-1234" style="font-family:'Courier New',monospace;letter-spacing:1px;">
        <button class="btn" onclick="trackRef()" style="white-space:nowrap;"><i class="fas fa-search"></i> Suivre</button>
      </div>
      <p style="font-size:12px;color:var(--text-dim);">Ce numéro vous a été communiqué lors de la soumission de votre signalement.</p>
      <div id="refResult" class="result"></div>
    </div>
  </div>

  <div class="card" style="text-align:center;">
    <div style="font-size:14px;font-weight:600;color:var(--text);margin-bottom:8px;">Contenu non répertorié ?</div>
    <p style="font-size:13px;color:var(--text-muted);margin-bottom:20px;">Si un contenu utilise le nom ou l'image de Sa Majesté sans autorisation, signalez-le.</p>
    <a href="/signaler" class="btn"><i class="fas fa-flag"></i> Signaler un abus</a>
  </div>
</div>
<footer><p>Communauté Masambukidi · E.LU.C.CO. · Ordonnance Présidentielle N° 97-031 du 14 Mars 1997<br>
  <a href="/">Accueil</a> · <a href="/signaler">Signaler</a> · <a href="/sitementions-legales">Mentions légales</a> · <a href="mailto:masambukidiste1983@gmail.com">Contact</a>
</p></footer>
<script>
function switchTab(name, el) {
  document.getElementById('tab-url').style.display = name==='url'?'block':'none';
  document.getElementById('tab-ref').style.display = name==='ref'?'block':'none';
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  el.classList.add('active');
}
async function verifyUrl() {
  const url = document.getElementById('verifyUrl').value.trim();
  const r = document.getElementById('urlResult');
  if(!url){alert('Entrez une URL.');return;}
  r.className='result';r.innerHTML='<i class="fas fa-spinner fa-spin"></i> Vérification...';r.style.display='block';
  try {
    const res = await axios.post('/api/verify/content',{url});
    if(res.data.is_authorized) {
      r.className='result r-ok';
      const c=res.data.certificate;
      r.innerHTML=`<div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
        <i class="fas fa-check-circle" style="color:#4CAF50;font-size:28px;"></i>
        <div><div style="font-weight:700;color:#4CAF50;font-size:15px;">Contenu Officiellement Autorisé</div>
        <div style="font-size:13px;color:var(--text-muted);">Ce contenu est approuvé par l'Administration de Sa Majesté</div></div></div>
        <div class="cert-grid">
          <div class="cert-item"><div class="cert-key">Certificat</div><div class="cert-val" style="color:var(--gold);font-family:'Courier New',monospace;">${c.number}</div></div>
          <div class="cert-item"><div class="cert-key">Bénéficiaire</div><div class="cert-val">${c.beneficiary}</div></div>
          <div class="cert-item"><div class="cert-key">Type</div><div class="cert-val">${c.content_type}</div></div>
          <div class="cert-item"><div class="cert-key">Autorisé le</div><div class="cert-val">${c.authorized_date}</div></div>
        </div>`;
    } else {
      r.className='result r-err';
      r.innerHTML=`<div style="display:flex;align-items:center;gap:12px;margin-bottom:12px;">
        <i class="fas fa-exclamation-triangle" style="color:#cc3333;font-size:24px;"></i>
        <div><div style="font-weight:700;color:#cc3333;font-size:15px;">Contenu Non Répertorié</div>
        <div style="font-size:13px;color:var(--text-muted);">Ce contenu n'est pas dans la liste des contenus autorisés.</div></div></div>
        <a href="/signaler" class="btn" style="font-size:13px;padding:11px 24px;"><i class="fas fa-flag"></i> Signaler ce contenu</a>`;
    }
  } catch(e){r.className='result r-err';r.innerHTML='<p style="color:#ff8080;">Erreur. Réessayez.</p>';}
}
async function trackRef() {
  const ref = document.getElementById('refInput').value.trim().toUpperCase();
  const r = document.getElementById('refResult');
  if(!ref){alert('Entrez un numéro de référence.');return;}
  r.className='result';r.innerHTML='<i class="fas fa-spinner fa-spin"></i> Recherche...';r.style.display='block';
  try {
    const res = await axios.get('/api/report/status/'+ref);
    if(res.data.success) {
      const d=res.data.data;
      const sc={pending:'#FFBA00',processing:'#5B9BFF',resolved:'#4CAF50',rejected:'#888',legal_action:'#FF5252'};
      r.className='result r-ok';
      r.innerHTML=`<div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;">
        <i class="fas fa-folder-open" style="color:var(--gold);font-size:24px;"></i>
        <div><div style="font-weight:700;color:#fff;font-size:15px;">Signalement ${d.ref_number}</div>
        <div style="font-size:13px;color:${sc[d.status]||'#fff'};font-weight:600;">${d.status_label}</div></div></div>
        <div class="cert-grid">
          <div class="cert-item"><div class="cert-key">Plateforme</div><div class="cert-val">${d.platform||'—'}</div></div>
          <div class="cert-item"><div class="cert-key">Type d'abus</div><div class="cert-val">${d.abuse_type||'—'}</div></div>
          <div class="cert-item"><div class="cert-key">Date de signalement</div><div class="cert-val">${new Date(d.created_at).toLocaleDateString('fr-FR')}</div></div>
          <div class="cert-item"><div class="cert-key">Priorité</div><div class="cert-val">${d.priority||'—'}</div></div>
        </div>
        ${d.actions_taken?'<div style="margin-top:14px;padding:12px 16px;background:rgba(255,255,255,.03);border-radius:8px;font-size:13px;color:var(--text-muted);"><strong style="color:var(--text);">Actions entreprises :</strong> '+d.actions_taken+'</div>':''}`;
    }
  } catch(e){r.className='result r-err';r.innerHTML='<p style="color:#ff8080;"><i class="fas fa-times-circle"></i> Signalement introuvable. Vérifiez le numéro.</p>';}
}
</script>
</body>
</html>
